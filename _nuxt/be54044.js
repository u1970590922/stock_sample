(window.webpackJsonp=window.webpackJsonp||[]).push([[8,6],{518:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(196);var n=Object.freeze({ASC:"ASC",DESC:"DESC"})},519:function(e,t,r){"use strict";r(101);var n=r(38),c=r(39),o=r(40),l=r(55),d=r(50),h=r(33),f=(r(3),r(8),r(245),r(98),r(152)),m=r(70),y=r(518),v=(r(35),r(520)),O=r(249),_=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(c.a)(this,e),this._storeName=t,this._config=r,this._dbName="demo",this._version=1,this._dbo=null}var t,r,l,d,h,f,m;return Object(o.a)(e,[{key:"_openDB",value:(m=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._storeName,r=this._config,e.next=4,Object(v.b)(this._dbName,this._version,{upgrade:function(e){var n=e.createObjectStore(t,{keyPath:"id",autoIncrement:!0});r.indexs.forEach((function(e){n.createIndex(e.name,e.name,{unique:e.unique})}))}});case 4:this._dbo=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"_closeDB",value:function(){null!=this._dbo&&(this._dbo.close(),this._dbo=null)}},{key:"deleteDB",value:(f=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._closeDB(),e.next=3,Object(v.a)(this._dbName);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getAll",value:(h=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,cursor,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:y.a.DESC,e.prev=1,t===y.a.ASC&&(r="push"),r="unshift",e.next=5,this._openDB();case 5:return n=[],e.next=8,this._dbo.transaction(this._storeName).store.openCursor();case 8:cursor=e.sent;case 9:if(!cursor){e.next=16;break}return n[r](cursor.value),e.next=13,cursor.continue();case 13:cursor=e.sent,e.next=9;break;case 16:return e.abrupt("return",n);case 17:return e.prev=17,this._closeDB(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[1,,17,20]])}))),function(){return h.apply(this,arguments)})},{key:"getById",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._openDB();case 3:return e.next=5,this._dbo.get(this._storeName,t);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,this._closeDB(),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[0,,6,9]])}))),function(e){return d.apply(this,arguments)})},{key:"create",value:(l=Object(n.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._openDB();case 3:return data.created_at=Object(O.a)(new Date),data.updated_at=null,e.next=7,this._dbo.add(this._storeName,data);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,this._closeDB(),e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[0,,8,11]])}))),function(e){return l.apply(this,arguments)})},{key:"update",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._openDB();case 3:return data.updated_at=Object(O.a)(new Date),e.next=6,this._dbo.put(this._storeName,data);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,this._closeDB(),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])}))),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openDB();case 2:return e.next=4,this._dbo.delete(this._storeName,t);case 4:this._closeDB();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(h.a)(e);if(t){var c=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}t.a=new(function(e){Object(l.a)(v,e);var t,r,d,h=j(v);function v(){return Object(c.a)(this,v),h.call(this,"stock",{indexs:[{name:"commodity_id",unique:!1}]})}return Object(o.a)(v,[{key:"getByCommodityId",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._openDB();case 3:return e.next=5,this._dbo.getAllFromIndex(this._storeName,"commodity_id",t);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,this._closeDB(),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[0,,6,9]])}))),function(e){return d.apply(this,arguments)})},{key:"getSumOfCommodityId",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._openDB();case 3:return e.next=5,this._dbo.getAllFromIndex(this._storeName,"commodity_id",t);case 5:return r=e.sent,e.abrupt("return",Object(f.sum)(Object(f.map)(r,"quantity")));case 7:return e.prev=7,this._closeDB(),e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])}))),function(e){return r.apply(this,arguments)})},{key:"getStatus",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var data,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAll(y.a.ASC);case 2:return data=e.sent,t={},Object.values(m.a).forEach((function(e){t[e]=0})),data.forEach((function(e){t[e.commodity_id]+=e.quantity})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),v}(_))},523:function(e,t,r){"use strict";r.r(t);r(24);var n={name:"InputMenu",props:{value:{type:[String,Number,Boolean,Array,Object],default:void 0},items:{type:Array,default:function(){return[]}},keys:{type:Array,default:function(){return["text","value"]}},label:{type:String,default:"請選擇..."},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{type:[String,Object],default:""},name:{type:String,default:""},vid:{type:String,default:""}},methods:{handleChange:function(e){this.$emit("input",e)},handleClear:function(){this.$emit("input",void 0)}}},c=r(29),o=r(36),l=r.n(o),d=r(617),h=r(534),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationProvider",{attrs:{rules:e.rules,name:e.name,vid:e.vid},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[e.searchable?[r("v-autocomplete",{attrs:{value:e.value,items:e.items,"item-text":e.keys[0],"item-value":e.keys[1],label:e.label,multiple:e.multiple,"error-messages":n,clearable:e.clearable,disabled:e.disabled},on:{"click:clear":e.handleClear,change:e.handleChange}})]:[r("v-select",{attrs:{value:e.value,items:e.items,"item-text":e.keys[0],"item-value":e.keys[1],label:e.label,multiple:e.multiple,"error-messages":n,clearable:e.clearable,disabled:e.disabled},on:{"click:clear":e.handleClear,change:e.handleChange}})]]}}])})}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAutocomplete:d.a,VSelect:h.a})},627:function(e,t,r){"use strict";r.r(t);r(11),r(9),r(12),r(3),r(15),r(8),r(16);var n=r(38),c=r(1),o=(r(98),r(41)),l=r(152),d=r(70),h=(r(24),r(552)),f=r(550);f.d.register(f.o,f.p,f.f,f.h,f.i,f.c,f.k);var m={name:"LineChart",components:{LineChartGenerator:h.a},props:{chartId:{type:String,default:"line-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:function(){}},plugins:{type:Array,default:function(){return[]}},chartData:{type:Object,default:function(){}},chartOptions:{type:Object,default:function(){return{responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{stepSize:1}}}}}}}},y=r(29),v=Object(y.a)(m,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("LineChartGenerator",{attrs:{"chart-options":e.chartOptions,"chart-data":e.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,width:e.width,height:e.height}})}),[],!1,null,null,null).exports,O=r(519);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var j={components:{LineChart:v},mounted:function(){this.setChartData(d.a.ONE)},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)("stock",["commodityDropdown"])),watch:{commodityId:function(e){this.setChartData(e)}},data:function(){return{commodityId:d.a.ONE,chartData:{labels:[],datasets:[]}}},methods:{setChartData:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.a.getByCommodityId(e);case 2:n=r.sent,Object(l.isEmpty)(n)||(t.chartData.labels=Object(l.map)(n,"created_at"),t.chartData.datasets[0]={label:Object(l.filter)(t.commodityDropdown,["value",n[0].commodity_id])[0].text,backgroundColor:t.$helpers.str.randomColor(),data:Object(l.map)(n,"quantity")});case 4:case"end":return r.stop()}}),r)})))()}}},x=j,k=r(36),w=r.n(k),D=r(233),C=r(99),B=r(531),R=Object(y.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",{staticClass:"mx-auto mt-4"},[r("v-card-title",[r("InputMenu",{attrs:{items:e.commodityDropdown,keys:["text","value"],label:"請選擇商品"},model:{value:e.commodityId,callback:function(t){e.commodityId=t},expression:"commodityId"}})],1),e._v(" "),r("v-card-text",[r("LineChart",{attrs:{chartData:e.chartData}})],1)],1)],1)}),[],!1,null,null,null);t.default=R.exports;w()(R,{InputMenu:r(523).default}),w()(R,{VCard:D.a,VCardText:C.b,VCardTitle:C.c,VContainer:B.a})}}]);